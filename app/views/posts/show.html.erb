<% content_for :title, @post.title %>
<% content_for :head do %>
  <% if @post.meta_description.present? %>
    <meta name="description" content="<%= @post.meta_description %>">
  <% end %>
<% end %>
<div class="">
  <% if notice.present? %>
    <p class="notice" id="notice"><%= notice %></p>
  <% end %>
  <article>
    <h1 class="text-2xl font-bold mb-4"><%= @post.title %></h1>
    <div class="mb-4">
      <p><%= @post.author_name %></p>
      <p class="text-sm text-gray-500">Published on <%= @post.published_at.strftime("%B %d, %Y") %></p>
    </div>
    <%# Ensure that even if @post is a Page, we render posts/_post %>
    <% post_partial = "posts/post" %>
    <%= render partial: post_partial, object: @post %>
  </article>
  <% if @post.tags.any? %>
    <nav class="text-xs text-[var(--light-muted)] dark:text-[var(--dark-muted)]" aria-label="Post tags">
      Tagged:
      <% @post.tags.each do |tag| %>
        <%= link_to tag.name, tag_path(tag.slug), class: "inline-block px-2 py-1 mx-1 mb-1 font-medium text-[var(--light-muted)] dark:text-[var(--dark-muted)] hover:bg-[var(--accent)] dark:hover:bg-[var(--dark-accent)] hover:text-[var(--light-text)] dark:hover:text-[var(--dark-text)] hover:opacity-70 transition rounded", aria: { label: "Tag: #{tag.name}" } %>
      <% end %>
    </nav>
  <% end %>
  <div class="section-divider">
    <%= link_to "Back to posts", posts_path, class: "inline-block py-2 font-medium transition-all duration-200 text-[var(--light-accent)] dark:text-[var(--dark-accent)] hover:text-[var(--light-accent-hover)] dark:hover:text-[var(--dark-accent-hover)] underline underline-offset-3 decoration-2 decoration-[var(--accent-hover) dark:decoration-[var(--dark-accent-hover)]" %>
  </div>
</div>
