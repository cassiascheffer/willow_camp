<% content_for :title, @post.title %>
<% content_for :head do %>
  <% if @post.meta_description.present? %>
    <meta name="description" content="<%= @post.meta_description %>">
  <% end %>
<% end %>
<div class="">
  <% if notice.present? %>
    <p class="notice" id="notice"><%= notice %></p>
  <% end %>
  <article>
    <h1 class="text-2xl font-bold mb-4"><%= @post.title %></h1>
    <div class="mb-4">
      <p><%= @post.author_name %></p>
      <p class="text-sm text-gray-500">Published on <%= @post.published_at.strftime("%B %d, %Y") %></p>
    </div>
    <%# Ensure that even if @post is a Page, we render posts/_post %>
    <% post_partial = "posts/post" %>
    <%= render partial: post_partial, object: @post %>
  </article>
  <% if @post.tags.any? %>
    <p class="text-sm text-gray-500 py-8">Tags:
      <% @post.tags.each do |tag| %>
        <%= link_to tag.name, tag_path(tag.slug), class: "inline-block px-2 py-1 mx-1 mb-1 rounded bg-[var(--light-muted)] dark:bg-[var(--dark-muted)] border border-[var(--light-border)] dark:border-[var(--dark-border)] text-xs font-medium text-[var(--light-text)] dark:text-[var(--dark-text)] hover:bg-[var(--light-card-hover)] dark:hover:bg-[var(--dark-card-hover)] transition" %>
      <% end %>
    </p>
  <% end %>
  <div class="section-divider">
    <%= link_to "Back to posts", posts_path, class: "inline-block px-4 py-2 font-medium rounded-md transition-all duration-200 bg-[var(--light-bg)] dark:bg-[var(--dark-bg)] border border-[var(--light-accent)] dark:border-[var(--dark-accent)] text-[var(--light-accent)] dark:text-[var(--dark-accent)] hover:bg-[var(--light-card-hover)] dark:hover:bg-[var(--dark-card-hover)] hover:text-[var(--light-accent-hover)] dark:hover:text-[var(--dark-accent-hover)] hover:border-[var(--light-accent-hover)] dark:hover:border-[var(--dark-accent-hover)]" %>
    <%= link_to "RSS Feed", posts_rss_path(format: :rss), class: "inline-block px-4 py-2 font-medium rounded-md transition-all duration-200 bg-[var(--light-bg)] dark:bg-[var(--dark-bg)] border border-[var(--light-accent)] dark:border-[var(--dark-accent)] text-[var(--light-accent)] dark:text-[var(--dark-accent)] hover:bg-[var(--light-card-hover)] dark:hover:bg-[var(--dark-card-hover)] hover:text-[var(--light-accent-hover)] dark:hover:text-[var(--dark-accent-hover)] hover:border-[var(--light-accent-hover)] dark:hover:border-[var(--dark-accent-hover)]" %>
  </div>
</div>
