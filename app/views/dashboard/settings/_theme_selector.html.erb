<div class="form-control w-full mb-6" data-controller="theme-selector">
  <%= form.label :theme, "Theme", class: "label" %>
  <!-- Theme dropdown -->
  <div class="dropdown dropdown-end w-full">
    <%= form.hidden_field :theme, value: user.theme, data: { theme_selector_target: "hiddenField" } %>
    <div tabindex="0" role="button" class="btn btn-outline w-full justify-between normal-case" data-theme-selector-target="dropdownButton">
      <div class="flex items-center gap-2">
        <div data-theme="<%= user.theme %>" data-theme-selector-target="buttonPreview" class="bg-base-100 grid shrink-0 grid-cols-2 gap-0.5 rounded-md border border-base-content/10 p-1">
          <div class="bg-base-content size-1 rounded-full"></div>
          <div class="bg-primary size-1 rounded-full"></div>
          <div class="bg-secondary size-1 rounded-full"></div>
          <div class="bg-accent size-1 rounded-full"></div>
        </div>
        <span class="capitalize" data-theme-selector-target="buttonText"><%= user.theme %></span>
      </div>
      <%= heroicon "chevron-down", options: { class: "w-4 h-4" } %>
    </div>
    <div tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-full max-h-96 overflow-y-auto border border-base-300">
      <div class="menu-title text-xs mb-2">Choose a Theme</div>
      <% ApplicationHelper::ALL_THEMES.each do |theme| %>
        <li>
          <button type="button"
                  class="flex items-center gap-3 p-2 hover:bg-base-200 rounded theme-option"
                  data-theme-value="<%= theme %>"
                  data-action="click->theme-selector#selectTheme">
            <div data-theme="<%= theme %>" class="bg-base-100 grid shrink-0 grid-cols-2 gap-0.5 rounded-md border border-base-content/10 p-1">
              <div class="bg-base-content size-1 rounded-full"></div>
              <div class="bg-primary size-1 rounded-full"></div>
              <div class="bg-secondary size-1 rounded-full"></div>
              <div class="bg-accent size-1 rounded-full"></div>
            </div>
            <span class="capitalize flex-1 text-left"><%= theme %></span>
            <% if theme == user.theme %>
              <%= heroicon "check", options: { class: "w-4 h-4 text-primary" } %>
            <% end %>
          </button>
        </li>
      <% end %>
    </div>
  </div>
</div>
