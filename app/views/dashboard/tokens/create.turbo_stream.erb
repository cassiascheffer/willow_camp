<% if @token.persisted? %>
  <%= turbo_stream.replace "new_token" do %>
    <%= render "dashboard/settings/token_form", token: UserToken.new %>
  <% end %>

  <%= turbo_stream.replace "tokens" do %>
    <%= render "dashboard/settings/token_list", tokens: @tokens %>
  <% end %>

  <%= turbo_stream.prepend "flash-messages" do %>
    <%= render "shared/flash", type: "notice", message: flash[:notice] %>
  <% end %>
<% else %>
  <%= turbo_stream.replace "new_token" do %>
    <%= render "dashboard/settings/token_form", token: @token %>
  <% end %>

  <%= turbo_stream.prepend "flash-messages" do %>
    <%= render "shared/flash", type: "alert", message: flash[:alert] %>
  <% end %>
<% end %>