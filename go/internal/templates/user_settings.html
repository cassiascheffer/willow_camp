{{define "content"}}
<div x-data="{
    savingProfile: false,
    savingPassword: false,
    showCurrentPassword: false,
    showNewPassword: false,
    showConfirmPassword: false
}">
    <h1 class="text-3xl font-bold mb-8">Account Settings</h1>

    <div class="max-w-2xl space-y-8">
        <!-- Profile Settings -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Profile</h2>
                <form method="POST" action="/dashboard/settings" class="space-y-4" @submit="savingProfile = true">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Name</span>
                    </label>
                    <input type="text" name="name" value="{{if .User.Name}}{{.User.Name}}{{end}}" class="input input-bordered" />
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Email</span>
                    </label>
                    <input type="email" name="email" value="{{.User.Email}}" class="input input-bordered" required />
                </div>

                <button type="submit"
                        class="btn btn-primary"
                        :disabled="savingProfile"
                        x-text="savingProfile ? 'Saving...' : 'Update Profile'">
                </button>
            </form>
        </div>
    </div>

    <!-- Password Change -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title">Change Password</h2>
            <form method="POST" action="/dashboard/settings/password" class="space-y-4" @submit="savingPassword = true">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Current Password</span>
                    </label>
                    <div class="relative">
                        <input :type="showCurrentPassword ? 'text' : 'password'"
                               name="current_password"
                               class="input input-bordered w-full pr-12"
                               required />
                        <button type="button"
                                @click="showCurrentPassword = !showCurrentPassword"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-base-content/50 hover:text-base-content"
                                :aria-label="showCurrentPassword ? 'Hide password' : 'Show password'">
                            <span x-show="!showCurrentPassword">ğŸ‘ï¸</span>
                            <span x-show="showCurrentPassword">ğŸ‘ï¸â€ğŸ—¨ï¸</span>
                        </button>
                    </div>
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">New Password</span>
                    </label>
                    <div class="relative">
                        <input :type="showNewPassword ? 'text' : 'password'"
                               name="new_password"
                               class="input input-bordered w-full pr-12"
                               required />
                        <button type="button"
                                @click="showNewPassword = !showNewPassword"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-base-content/50 hover:text-base-content"
                                :aria-label="showNewPassword ? 'Hide password' : 'Show password'">
                            <span x-show="!showNewPassword">ğŸ‘ï¸</span>
                            <span x-show="showNewPassword">ğŸ‘ï¸â€ğŸ—¨ï¸</span>
                        </button>
                    </div>
                </div>

                <div class="form-control">
                    <label class="label">
                        <span class="label-text">Confirm New Password</span>
                    </label>
                    <div class="relative">
                        <input :type="showConfirmPassword ? 'text' : 'password'"
                               name="confirm_password"
                               class="input input-bordered w-full pr-12"
                               required />
                        <button type="button"
                                @click="showConfirmPassword = !showConfirmPassword"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-base-content/50 hover:text-base-content"
                                :aria-label="showConfirmPassword ? 'Hide password' : 'Show password'">
                            <span x-show="!showConfirmPassword">ğŸ‘ï¸</span>
                            <span x-show="showConfirmPassword">ğŸ‘ï¸â€ğŸ—¨ï¸</span>
                        </button>
                    </div>
                </div>

                <button type="submit"
                        class="btn btn-primary"
                        :disabled="savingPassword"
                        x-text="savingPassword ? 'Changing Password...' : 'Change Password'">
                </button>
            </form>
        </div>
    </div>
</div>
</div>
{{end}}
